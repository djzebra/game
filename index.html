<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #FFFFFF;
        }
        #unity-canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #FFFFFF;
        }
        #loading-text {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-size: 24px;
            color: #333;
            background: #FFFFFF;
            position: absolute;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 1000;
            text-align: center;
        }
    </style>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes">
</head>
<body>
<div id="loading-text">Loading</div>
    <canvas id="unity-canvas" tabindex="-1"></canvas>
    <script>
        async function fetchAndStoreFile(url, fileName) {
        const response = await fetch(url);
        const blob = await response.blob();

        const dbRequest = indexedDB.open('gameFilesDB', 1);

        dbRequest.onupgradeneeded = event => {
            const db = event.target.result;
            db.createObjectStore('files', { keyPath: 'name' });
        };

        dbRequest.onsuccess = event => {
            const db = event.target.result;
            const transaction = db.transaction('files', 'readwrite');
            const store = transaction.objectStore('files');
            store.put({ name: fileName, file: blob });
        };

        dbRequest.onerror = event => {
            console.error('IndexedDB error:', event);
        };
    }

    function listIndexedDBFiles() {
        const dbRequest = indexedDB.open('gameFilesDB', 1);

        dbRequest.onsuccess = event => {
            const db = event.target.result;
            const transaction = db.transaction('files', 'readonly');
            const store = transaction.objectStore('files');
            const getAllRequest = store.getAll();

            getAllRequest.onsuccess = () => {
                console.log('Files in IndexedDB:');
                getAllRequest.result.forEach(file => {
                    console.log(`File name: ${file.name}`);
                });
            };
        };
    }

    fetchAndStoreFile('https://drive.google.com/uc?export=download&id=YOUR_FILE_ID', 'example1.gz');
    fetchAndStoreFile('https://drive.google.com/uc?export=download&id=YOUR_FILE_ID_2', 'example2.gz');

    setTimeout(listIndexedDBFiles, 2000); 
    </script>
</body>
</html>
